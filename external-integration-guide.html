<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Organization Chart API</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            direction: ltr;
            text-align: left;
        }
        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #28a745;
            margin: 15px 0;
        }
        .error {
            background: #f8d7da;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #dc3545;
            margin: 15px 0;
        }
        h1, h2, h3 {
            color: #333;
        }
        .step {
            background: #e3f2fd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #2196f3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”— Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Organization Chart API</h1>
        
        <div class="highlight">
            <strong>ğŸ“ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù†Ø´ÙˆØ±:</strong> 
            <a href="https://workenrich-org-chart-qa3e.bolt.host" target="_blank">
                https://workenrich-org-chart-qa3e.bolt.host
            </a>
        </div>

        <h2>ğŸš€ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h2>
        
        <div class="step">
            <h3>Ø§Ù„Ø®Ø·ÙˆØ© 1: ØªØ¶Ù…ÙŠÙ† Ø§Ù„Ù€ iframe ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ</h3>
        </div>
        
        <div class="code-block">
&lt;!-- ÙÙŠ ØµÙØ­Ø© HTML Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ --&gt;
&lt;iframe 
    id="orgChartFrame"
    src="https://workenrich-org-chart-qa3e.bolt.host" 
    width="100%" 
    height="600px"
    frameborder="0"&gt;
&lt;/iframe&gt;
        </div>

        <div class="step">
            <h3>Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù†ØªØ¸Ø§Ø± Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù€ API</h3>
        </div>

        <div class="code-block">
&lt;script&gt;
// Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ iframe
document.getElementById('orgChartFrame').onload = function() {
    console.log('ğŸ“± iframe ØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡');
    
    // Ø§Ù†ØªØ¸Ø§Ø± Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù€ API
    window.addEventListener('OrgChartReady', function() {
        console.log('âœ… Organization Chart API Ø¬Ø§Ù‡Ø²!');
        
        // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        sendDataToChart();
    });
};
&lt;/script&gt;
        </div>

        <div class="step">
            <h3>Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
        </div>

        <h3>ğŸ“‹ Ø´ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</h3>
        
        <div class="code-block">
function sendDataToChart() {
    // Ø´ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµØ­ÙŠØ­
    const employeeData = {
        name: 'Aya Emad',                    // Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù (Ù…Ø·Ù„ÙˆØ¨)
        position: 'CEO',                     // Ø§Ù„Ù…Ù†ØµØ¨ (Ù…Ø·Ù„ÙˆØ¨)
        jobTitleCode: 1,                     // ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØµØ¨ (Ù…Ø·Ù„ÙˆØ¨)
        level: 'Executive',                  // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ (Ù…Ø·Ù„ÙˆØ¨)
        expanded: true,                      // Ù‡Ù„ Ø§Ù„Ø¹Ù‚Ø¯Ø© Ù…ØªÙˆØ³Ø¹Ø©ØŸ
        firstNode: true,                     // Ù‡Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø°Ø±ØŸ
        children: [                          // Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ†
            {
                name: 'Omar Tarek',
                position: 'CTO',
                jobTitleCode: 2,
                level: 'Senior Management',
                expanded: false,
                children: [
                    {
                        name: 'Ahmed Ali',
                        position: 'Senior Developer',
                        jobTitleCode: 3,
                        level: 'Staff',
                        expanded: false,
                        children: []
                    }
                ]
            },
            {
                name: 'Nour Hany',
                position: 'CMO',
                jobTitleCode: 4,
                level: 'Senior Management',
                expanded: false,
                children: []
            }
        ]
    };
    
    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø®Ø·Ø·
    window.OrgChartAPI.setData(employeeData, 'orgChart');
}
        </div>

        <h2>ğŸ”§ Ù…Ø«Ø§Ù„ ÙƒØ§Ù…Ù„ Ù„Ù„ØªÙƒØ§Ù…Ù„</h2>
        
        <div class="code-block">
&lt;!DOCTYPE html&gt;
&lt;html lang="ar"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Ù…ÙˆÙ‚Ø¹ÙŠ Ù…Ø¹ Organization Chart&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ Ù„Ø´Ø±ÙƒØªÙŠ&lt;/h1&gt;
    
    &lt;!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… --&gt;
    &lt;button onclick="loadMyData()"&gt;ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª&lt;/button&gt;
    &lt;button onclick="expandAll()"&gt;ØªÙˆØ³ÙŠØ¹ Ø§Ù„ÙƒÙ„&lt;/button&gt;
    &lt;button onclick="collapseAll()"&gt;Ø·ÙŠ Ø§Ù„ÙƒÙ„&lt;/button&gt;
    
    &lt;!-- Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ --&gt;
    &lt;iframe 
        id="orgChart"
        src="https://workenrich-org-chart-qa3e.bolt.host" 
        width="100%" 
        height="600px"
        frameborder="0"&gt;
    &lt;/iframe&gt;

    &lt;script&gt;
        let apiReady = false;
        
        // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ iframe
        document.getElementById('orgChart').onload = function() {
            // Ø§Ù†ØªØ¸Ø§Ø± Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù€ API
            window.addEventListener('OrgChartReady', function() {
                console.log('âœ… API Ø¬Ø§Ù‡Ø²!');
                apiReady = true;
                
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
                loadMyData();
            });
            
            // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù†Ø¬Ø§Ø­
            window.addEventListener('OrgChartDataSet', function(e) {
                console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', e.detail);
                alert('ØªÙ… ØªØ­Ù…ÙŠÙ„ ' + e.detail.itemCount + ' Ù…ÙˆØ¸Ù Ø¨Ù†Ø¬Ø§Ø­!');
            });
        };
        
        // Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ
        function loadMyData() {
            if (!apiReady) {
                alert('âš ï¸ Ø§Ù„Ù€ API Ù„Ù… ÙŠØµØ¨Ø­ Ø¬Ø§Ù‡Ø²Ø§Ù‹ Ø¨Ø¹Ø¯');
                return;
            }
            
            // Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
            const myCompanyData = {
                name: 'Aya Emad',
                position: 'Chief Executive Officer',
                jobTitleCode: 1,
                level: 'Executive',
                expanded: true,
                firstNode: true,
                children: [
                    {
                        name: 'Omar Tarek',
                        position: 'Chief Technology Officer',
                        jobTitleCode: 2,
                        level: 'Senior Management',
                        expanded: false,
                        children: [
                            {
                                name: 'Ahmed Salem',
                                position: 'Senior Full Stack Developer',
                                jobTitleCode: 3,
                                level: 'Staff',
                                expanded: false,
                                children: []
                            },
                            {
                                name: 'Fatima Ali',
                                position: 'Frontend Developer',
                                jobTitleCode: 4,
                                level: 'Staff',
                                expanded: false,
                                children: []
                            }
                        ]
                    },
                    {
                        name: 'Nour Hany',
                        position: 'Chief Marketing Officer',
                        jobTitleCode: 5,
                        level: 'Senior Management',
                        expanded: false,
                        children: [
                            {
                                name: 'Sara Mohamed',
                                position: 'Marketing Manager',
                                jobTitleCode: 6,
                                level: 'Middle Management',
                                expanded: false,
                                children: []
                            }
                        ]
                    }
                ]
            };
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            window.OrgChartAPI.setData(myCompanyData, 'orgChart');
        }
        
        // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ…
        function expandAll() {
            if (apiReady) {
                window.OrgChartAPI.expandAll();
            }
        }
        
        function collapseAll() {
            if (apiReady) {
                window.OrgChartAPI.collapseAll();
            }
        }
        
        // Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† API Ø®Ø§Ø±Ø¬ÙŠ
        function loadDataFromAPI() {
            if (!apiReady) return;
            
            fetch('/api/employees')
                .then(response =&gt; response.json())
                .then(data =&gt; {
                    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                    const formattedData = formatDataForOrgChart(data);
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…Ø®Ø·Ø·
                    window.OrgChartAPI.setData(formattedData, 'orgChart');
                })
                .catch(error =&gt; {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                });
        }
        
        // Ø¯Ø§Ù„Ø© ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function formatDataForOrgChart(apiData) {
            // Ø­ÙˆÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ API Ù„Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            return {
                name: apiData.ceo_name,
                position: apiData.ceo_position,
                jobTitleCode: 1,
                level: 'Executive',
                expanded: true,
                firstNode: true,
                children: apiData.departments.map((dept, index) =&gt; ({
                    name: dept.manager_name,
                    position: dept.manager_position,
                    jobTitleCode: index + 2,
                    level: 'Senior Management',
                    expanded: false,
                    children: dept.employees.map((emp, empIndex) =&gt; ({
                        name: emp.name,
                        position: emp.position,
                        jobTitleCode: (index + 2) * 10 + empIndex,
                        level: emp.level || 'Staff',
                        expanded: false,
                        children: []
                    }))
                }))
            };
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
        </div>

        <h2>ğŸ“Š Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©</h2>
        
        <div class="code-block">
const supportedLevels = [
    'Executive',           // Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§
    'Senior Management',   // Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§
    'Middle Management',   // Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ³Ø·Ù‰
    'Junior Management',   // Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ØªØ¯Ø¦Ø©
    'Senior Staff',        // Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø£Ù‚Ø¯Ù…
    'Staff',              // Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
    'Entry Level'         // Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†
];
        </div>

        <h2>ğŸ›ï¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
        
        <div class="code-block">
// ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
window.OrgChartAPI.setData(data, 'orgChart');

// ØªÙˆØ³ÙŠØ¹/Ø·ÙŠ Ø§Ù„Ø¹Ù‚Ø¯
window.OrgChartAPI.expandAll();
window.OrgChartAPI.collapseAll();
window.OrgChartAPI.expandNode(nodeId);
window.OrgChartAPI.collapseNode(nodeId);

// Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ©
window.OrgChartAPI.searchEmployee('Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù');
window.OrgChartAPI.filterByLevel('Executive');
window.OrgChartAPI.resetFilters();

// Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ù…ÙˆØ¸Ù
window.OrgChartAPI.focusOnEmployee('jobTitleCode Ø£Ùˆ Ø§Ø³Ù…');

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
const stats = window.OrgChartAPI.getStats();

// Ù…Ø³Ø­ Ø§Ù„Ù…Ø®Ø·Ø·
window.OrgChartAPI.clearChart();
        </div>

        <div class="success">
            <strong>âœ… Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©:</strong>
            <ul>
                <li>ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù€ event <code>OrgChartReady</code> Ù‚Ø¨Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù€ API</li>
                <li>Ø§Ø³ØªØ®Ø¯Ù… <code>setData</code> Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† <code>init</code></li>
                <li>ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
                <li>Ø§Ø³ØªØ®Ø¯Ù… <code>children: []</code> Ø­ØªÙ‰ Ù„Ùˆ ÙƒØ§Ù†Øª ÙØ§Ø±ØºØ©</li>
            </ul>
        </div>

        <div class="error">
            <strong>âŒ Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ø¦Ø¹Ø©:</strong>
            <ul>
                <li>Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù€ API Ù‚Ø¨Ù„ Ø¬Ø§Ù‡Ø²ÙŠØªÙ‡</li>
                <li>Ù†Ø³ÙŠØ§Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù…Ø«Ù„ <code>jobTitleCode</code> Ùˆ <code>level</code></li>
                <li>Ø¹Ø¯Ù… ØªØ¶Ù…ÙŠÙ† <code>children</code> ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
                <li>Ø§Ø³ØªØ®Ø¯Ø§Ù… <code>init</code> Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† <code>setData</code></li>
            </ul>
        </div>
    </div>
</body>
</html>